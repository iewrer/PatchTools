patchdir  = "quilt/patches":
sourcedir = "quilt":

PATCH: "not-capebus/0103-bone-capemgr-Make-sure-cape-removal-works.patch"
   DIFF: "diff --git a/drivers/misc/cape/beaglebone/capemgr.c b/drivers/misc/cape/beaglebone/capemgr.c"
      HUNK: "@@ -154,6 +154,7 @@ static int bone_slot_fill_override(struct bone_cape_slot *slot,"
      HUNK: "@@ -991,14 +992,23 @@ static ssize_t slots_store(struct device *dev, struct device_attribute *attr,"
         WARN:  "merge"  line not found at 994: ""
         ERROR: "delete" line not found at 995: "		/* found? */"
         WARN:  "merge"  line not found at 996: "			return -ENODEV;"
         WARN:  "merge"  line not found at 997: ""
         ERROR: "delete" line not found at 998: "		if (ret == 0)"
         WARN:  "merge"  line not found at 999: ""
         ERROR: "delete" line not found at 1000: "		return ret == 0 ? strlen(buf) : ret;"
         WARN:  "merge"  line not found at 1001: "	}"
         WARN:  "merge"  line not found at 1002: ""
         WARN:  "merge"  line not found at 1003: "	part_number = kstrdup(buf, GFP_KERNEL);"
         FIND:  "add"    line found at 1411: "		if (slot == NULL) {"
         FIND:  "add"    line found at 968: "			mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 994: "			mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1499: "			mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1735: "			mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1771: "			mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 968: "		mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 994: "		mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1499: "		mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1735: "		mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1771: "		mutex_unlock(&info->slots_list_mutex);"
         FIND:  "add"    line found at 1423: "					slotno);"
         FIND:  "add"    line found at 1429: "					slotno);"
         FIND:  "add"    line found at 1436: "					slotno);"
         FIND:  "add"    line found at 1466: "					slotno);"
         FIND:  "add"    line found at 1476: "					slotno);"
         FIND:  "add"    line found at 1481: "					slotno);"
         FIND:  "add"    line found at 1490: "					slotno);"
         FIND:  "merge"  line found at 1004: "	part_number = kstrdup(buf, GFP_KERNEL);"
      HUNK: "@@ -1292,6 +1302,35 @@ static int bone_capemgr_unload(struct bone_cape_slot *slot)"
         FIND:  "add"    line found at 476: "	struct bone_capemgr_info *info = slot->info;"
         FIND:  "add"    line found at 774: "	struct bone_capemgr_info *info = slot->info;"
         FIND:  "add"    line found at 844: "	struct bone_capemgr_info *info = slot->info;"
         FIND:  "add"    line found at 1109: "	struct bone_capemgr_info *info = slot->info;"
         FIND:  "add"    line found at 775: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 845: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 1081: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 1101: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 1110: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 1402: "	struct device *dev = &info->pdev->dev;"
         FIND:  "add"    line found at 996: "	if (slot == NULL)"
         FIND:  "add"    line found at 1760: "	/* unload just in case */"
         FIND:  "add"    line found at 1421: "	if (ret != 0) {"
         FIND:  "add"    line found at 1464: "	if (ret != 0) {"
         FIND:  "add"    line found at 1472: "	if (ret != 0) {"
         FIND:  "add"    line found at 1488: "	if (ret != 0) {"
         FIND:  "add"    line found at 1578: "	if (ret != 0) {"
         FIND:  "add"    line found at 1612: "	if (ret != 0) {"
         FIND:  "add"    line found at 1763: "	/* if probed OK, remove the sysfs nodes */"
         FIND:  "add"    line found at 1764: "	if (slot->probed && !slot->probe_failed)"
         FIND:  "add"    line found at 1765: "		bone_cape_slot_sysfs_unregister(slot);"
         FIND:  "add"    line found at 1767: "	/* remove it from the list */"
         FIND:  "add"    line found at 1768: "	list_del(&slot->node);"
         FIND:  "add"    line found at 1512: "	devm_kfree(dev, slot);"
      HUNK: "@@ -1755,19 +1794,8 @@ static int bone_capemgr_remove(struct platform_device *pdev)"
         ERROR: "delete" line not found at 1758: "	list_for_each_entry_safe(slot, slotn, &info->slot_list, node)"
         WARN:  "merge"  line not found at 1759: "	mutex_unlock(&info->slots_list_mutex);"
         WARN:  "merge"  line not found at 1760: ""
         WARN:  "merge"  line not found at 1761: "	bone_capemgr_info_sysfs_unregister(info);"
         FIND:  "merge"  line found at 968: "	mutex_unlock(&info->slots_list_mutex);"
         FIND:  "merge"  line found at 994: "	mutex_unlock(&info->slots_list_mutex);"
         FIND:  "merge"  line found at 1499: "	mutex_unlock(&info->slots_list_mutex);"
         FIND:  "merge"  line found at 1735: "	mutex_unlock(&info->slots_list_mutex);"
         FIND:  "merge"  line found at 1771: "	mutex_unlock(&info->slots_list_mutex);"
         FIND:  "merge"  line found at 1773: "	bone_capemgr_info_sysfs_unregister(info);"
   INFO:  4 patch errors

Summary:
   0 passed, 0 skipped, 1 tested
